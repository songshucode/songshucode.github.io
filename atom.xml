<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Songshu</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://192.168.0.186/"/>
  <updated>2019-08-02T06:36:44.300Z</updated>
  <id>http://192.168.0.186/</id>
  
  <author>
    <name>Songshu Zhu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>encode decode encryption and decryption</title>
    <link href="http://192.168.0.186/2019/07/20/encode-decode-encryption-and-decryption/"/>
    <id>http://192.168.0.186/2019/07/20/encode-decode-encryption-and-decryption/</id>
    <published>2019-07-20T13:52:29.000Z</published>
    <updated>2019-08-02T06:36:44.300Z</updated>
    
    <content type="html"><![CDATA[<p>encoding, decoding, encryption and decryption application on python.<br><a id="more"></a></p><h1 id="1-encoding-and-decocing"><a href="#1-encoding-and-decocing" class="headerlink" title="1 encoding and decocing"></a>1 encoding and decocing</h1><h2 id="1-1-binary"><a href="#1-1-binary" class="headerlink" title="1.1 binary"></a>1.1 binary</h2><p>representing data using ‘0’ and ‘1’.</p><h2 id="1-2-hex"><a href="#1-2-hex" class="headerlink" title="1.2 hex"></a>1.2 hex</h2><p>representing data using ‘0’-‘9’ and ‘a’-‘f’. For example, ‘0x1f’ is 16+15=31.<br>in python, you can use module, ‘binascii’, to operate data between binary and byte and hex.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> binascii <span class="keyword">import</span> b2a_hex, a2b_hex</span><br><span class="line">a = <span class="string">'songshu'</span>.encode()  <span class="comment"># bytes b'songshu'</span></span><br><span class="line">b = b2a_hex(a)  <span class="comment"># hex b'736f6e67736875'</span></span><br><span class="line">c = a2b_hex(b)  <span class="comment"># bytes b'songshu'</span></span><br></pre></td></tr></table></figure></p><p><strong>note:</strong> in python, some special characters do not print as letter such as ‘0xcc’, so it will show as hex such as <code>b&#39;\xcc\x88\xa6/a\xa6\x1fF\xd6iF\xf2\xd8\xf5=\xf6&#39;</code>.</p><h2 id="1-3-base64"><a href="#1-3-base64" class="headerlink" title="1.3 base64"></a>1.3 base64</h2><p>base64 is designed to carry data stored in binary formats across channel that only relably support text content. it uses three 8-bit bytes (24-bit) to represent four 6-bit base64 digits, so if the data length is not a multiple of 4 bytes, it will use a padding ‘=’ at the end of the data.</p><div class="table-container"><table><thead><tr><th>base64</th><th>char</th></tr></thead><tbody><tr><td>0-25</td><td>A-Z</td></tr><tr><td>26-51</td><td>a-z</td></tr><tr><td>52-61</td><td>0-9</td></tr><tr><td>62</td><td>+</td></tr><tr><td>63</td><td>/</td></tr><tr><td>pading</td><td>=</td></tr></tbody></table></div><p>in python, you can use module, ‘base64’, to operate data between byte and base64.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">'songshu'</span>.encode()  <span class="comment"># bytes b'songshu'</span></span><br><span class="line">b = base64.b64encode(a) <span class="comment"># base64 b'c29uZ3NodQ=='</span></span><br><span class="line">c = base64.b64decode(b) <span class="comment"># bytes b'songshu'</span></span><br></pre></td></tr></table></figure></p><h2 id="1-4-byte-and-string"><a href="#1-4-byte-and-string" class="headerlink" title="1.4 byte and string"></a>1.4 byte and string</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bytes to string</span></span><br><span class="line">a = <span class="string">b'123'</span></span><br><span class="line">b = bytes.decode(a)</span><br><span class="line"><span class="comment"># string to bytes</span></span><br><span class="line">a = <span class="string">'123'</span></span><br><span class="line">b = str.encode(a)</span><br></pre></td></tr></table></figure><h1 id="2-encryption-and-dectyption"><a href="#2-encryption-and-dectyption" class="headerlink" title="2 encryption and dectyption"></a>2 encryption and dectyption</h1><h2 id="2-1-DES"><a href="#2-1-DES" class="headerlink" title="2.1 DES"></a>2.1 DES</h2><p>the <code>data</code> length must be a multiple of 8 bytes, and the <code>key</code> length must be 8 bytes.<br>in application, I find I can also use decryption function to enctypte and enctyption function to dectyption.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">key = <span class="string">b'abcdefg='</span></span><br><span class="line">text = <span class="string">'12345678!'</span></span><br><span class="line">text = text + (<span class="number">8</span> - (len(text) % <span class="number">8</span>)) * <span class="string">'='</span></span><br><span class="line"></span><br><span class="line">des = DES.new(key, DES.MODE_ECB)</span><br><span class="line"></span><br><span class="line">a = text.encode()   <span class="comment"># bytes</span></span><br><span class="line">b = des.encrypt(a)  <span class="comment"># encryption</span></span><br><span class="line">c = des.decrypt(b)  <span class="comment"># dectyption</span></span><br></pre></td></tr></table></figure></p><h2 id="2-2-3DES"><a href="#2-2-3DES" class="headerlink" title="2.2 3DES"></a>2.2 3DES</h2><p>it is called triple DES, which applies the DES cipher algorithm three times to each data block, and the key length is three times that of DES.<br>encoding process: c = ek3(dk2(ek1(p)))<br>decoding process: p = dk1(ek2(dk3(c)))<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">key3 =<span class="string">b'abcdefghybcdefghqrstuvwx'</span></span><br><span class="line">des = DES3.new(key3, DES3.MODE_ECB)</span><br><span class="line">a = text.encode()   <span class="comment"># bytes</span></span><br><span class="line">b = des.encrypt(a)  <span class="comment"># encryption</span></span><br><span class="line">c = des.decrypt(b)  <span class="comment"># decryption</span></span><br></pre></td></tr></table></figure></p><h2 id="2-3-AES-commend"><a href="#2-3-AES-commend" class="headerlink" title="2.3 AES(commend)"></a>2.3 AES(commend)</h2><p>it is a symmetric encryption method and used to replace DES. the key length must be 16 bytes(AES-128), 24 bytes(aes-192) or 32 bytes(AES-256).<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="string">'songshu'</span></span><br><span class="line">key = <span class="string">b'this is a 16 key'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># encryption</span></span><br><span class="line">iv = Random.new().read(AES.block_size) <span class="comment"># AES.block_size is the key length.</span></span><br><span class="line">mycipher = AES.new(key, AES.MODE_CFB, iv)</span><br><span class="line">ciphertext = iv + mycipher.encrypt(data.encode())</span><br><span class="line"></span><br><span class="line"><span class="comment"># decryption</span></span><br><span class="line">mydecrypt = AES.new(key, AES.MODE_CFB, ciphertext[:<span class="number">16</span>])</span><br><span class="line">decrypttext = mydecrypt.decrypt(ciphertext[<span class="number">16</span>:])</span><br></pre></td></tr></table></figure></p><h2 id="2-4-RSA"><a href="#2-4-RSA" class="headerlink" title="2.4 RSA"></a>2.4 RSA</h2><p>this is a asymmetry encryption method. in this cryptosystem, the encryption key is public and it is different from the decryption key which is kept secret.</p><h3 id="2-4-1-key-distribution"><a href="#2-4-1-key-distribution" class="headerlink" title="2.4.1 key distribution"></a>2.4.1 key distribution</h3><p>suppose that Bob want to send a message to Alice. if the decide to use RSA, Bob must know Alice’s public key to encrpt the message and Alice must use her private key to decrpt the message. to enable Bob to send his encrpted messages, Alice transmits her public key to Bob via a reliable, but not necessarily secret, route. and Alice’s private key is never distributed.</p><h3 id="2-4-2-example"><a href="#2-4-2-example" class="headerlink" title="2.4.2 example"></a>2.4.2 example</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># RSA</span></span><br><span class="line"><span class="keyword">from</span> Cryptodome.PublicKey <span class="keyword">import</span> RSA</span><br><span class="line"><span class="keyword">from</span> Cryptodome.PublicKey <span class="keyword">import</span> RSA</span><br><span class="line"><span class="keyword">from</span> Cryptodome.Cipher <span class="keyword">import</span> PKCS1_v1_5</span><br><span class="line"><span class="comment"># generate key</span></span><br><span class="line">rsa = RSA.generate(<span class="number">1024</span>)</span><br><span class="line"><span class="comment"># - private key</span></span><br><span class="line">privatekey = rsa.exportKey()</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'privatekey.pem'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(bytes.decode(privatekey))</span><br><span class="line"><span class="comment"># - public key</span></span><br><span class="line">publickey = rsa.publickey().exportKey()</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'publickey.pem'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(bytes.decode(publickey))</span><br><span class="line"><span class="comment"># encryption</span></span><br><span class="line">publickey = RSA.importKey(str.encode(open(<span class="string">'publickey.pem'</span>).read()))</span><br><span class="line">enc = PKCS1_v1_5.new(publickey)</span><br><span class="line">ciphertext = enc.encrypt(<span class="string">"Thank you mom"</span>.encode())</span><br><span class="line"><span class="comment"># - encode, base64 bytes used for transmission on Internet, string type used to recode to document.</span></span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"ciphertext"</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(bytes.decode(base64.encodebytes(ciphertext)))</span><br><span class="line"><span class="comment"># decryption</span></span><br><span class="line">key = RSA.importKey(str.encode(open(<span class="string">'privatekey.pem'</span>).read()))</span><br><span class="line">dec = PKCS1_v1_5.new(key)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'ciphertext'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    ciphertext = f.read()</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line">ciphertext = base64.decodebytes(str.encode(ciphertext))</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> Cryptodome <span class="keyword">import</span> Random</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> (dec.decrypt(ciphertext, Random.new().read))</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;encoding, decoding, encryption and decryption application on python.&lt;br&gt;
    
    </summary>
    
      <category term="python" scheme="http://192.168.0.186/categories/python/"/>
    
      <category term="encode, decode, encryption and decryption" scheme="http://192.168.0.186/categories/python/encode-decode-encryption-and-decryption/"/>
    
    
      <category term="python" scheme="http://192.168.0.186/tags/python/"/>
    
      <category term="encode" scheme="http://192.168.0.186/tags/encode/"/>
    
      <category term="decode" scheme="http://192.168.0.186/tags/decode/"/>
    
      <category term="encryption" scheme="http://192.168.0.186/tags/encryption/"/>
    
      <category term="decryption" scheme="http://192.168.0.186/tags/decryption/"/>
    
  </entry>
  
  <entry>
    <title>tensorflow-model-save</title>
    <link href="http://192.168.0.186/2019/07/02/tensorflow-model-save/"/>
    <id>http://192.168.0.186/2019/07/02/tensorflow-model-save/</id>
    <published>2019-07-02T12:26:28.000Z</published>
    <updated>2019-07-10T12:09:44.304Z</updated>
    
    <content type="html"><![CDATA[<p>save model using tensorflow; read the model file saved to view model weights and structure. Also, you can wiew the model structure you build.<br><a id="more"></a></p><h1 id="save-model"><a href="#save-model" class="headerlink" title="save model"></a>save model</h1><h2 id="save-a-model"><a href="#save-a-model" class="headerlink" title="save a model"></a>save a model</h2><p>It’s a simple method by the tensorflow. model_name is the name you want use it to name your model. when you do the following command, you will get four files, *.index, *.data-xxx, *.meta and the checkpoing file.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">... </span><span class="comment"># define the model graph</span></span><br><span class="line">saver = tf.train.Saver()</span><br><span class="line">sess = tf.Session()</span><br><span class="line"><span class="meta">... </span><span class="comment"># run the model</span></span><br><span class="line">saver.save(sess, model_name)    <span class="comment"># save model</span></span><br><span class="line">sess.close()</span><br></pre></td></tr></table></figure></p><h2 id="save-a-model-without-saving-the-model-graph"><a href="#save-a-model-without-saving-the-model-graph" class="headerlink" title="save a model without saving the model graph"></a>save a model without saving the model graph</h2><p>sometimes, you only want to save the model weights but not the model graph, you can use the following command.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">saver.save(sess, model_name, write_meta_graph=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure></p><h2 id="save-a-model-by-the-training-step"><a href="#save-a-model-by-the-training-step" class="headerlink" title="save a model by the training step"></a>save a model by the training step</h2><p>using the training step, you can record model weights on the different training step. and you also define the maximum number you want to seve.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">saver.save(sess, model_name, max_to_keep=<span class="number">4</span>, global_step=step)</span><br></pre></td></tr></table></figure></p><h2 id="save-a-model-by-the-training-time"><a href="#save-a-model-by-the-training-time" class="headerlink" title="save a model by the training time"></a>save a model by the training time</h2><p>save the model at regular time intervals.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">saver.save(sess, model_name, max_to_keep=<span class="number">4</span>, keep_checkpoint_every_n_hours=<span class="number">2</span>)</span><br></pre></td></tr></table></figure></p><h2 id="only-save-a-part-of-model-weights"><a href="#only-save-a-part-of-model-weights" class="headerlink" title="only save a part of model weights"></a>only save a part of model weights</h2><p>sometimes, you don’t need save all the model variables.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">saver = tf.train.Saver([w1, w2])</span><br><span class="line">...</span><br><span class="line">saver.save(sess, model_name)</span><br></pre></td></tr></table></figure></p><h1 id="load-model"><a href="#load-model" class="headerlink" title="load model"></a>load model</h1><h2 id="model-file-class"><a href="#model-file-class" class="headerlink" title="model file class"></a>model file class</h2><ul><li>*.meta file </li></ul><p>It’s a <code>protocol buffer</code> style file to save the whole model structure and the operation on the model.</p><ul><li>*.data-xxx file</li></ul><p>It’s used to save all the value of the model weights.</p><ul><li>*.index file</li></ul><p>It’s used to record the correspondence between the model weights and model structure graph.</p><ul><li>checkpoint file</li></ul><p>It’s used to record the model name saved on the training process. The record name on the top is the lastest one.</p><h2 id="check-the-name-and-value-on-the-model"><a href="#check-the-name-and-value-on-the-model" class="headerlink" title="check the name and value on the model"></a>check the name and value on the model</h2><p>by the following way, you can get the variables on the model. It only contains the weights (trainable variables), but no operation. And this command only need <code>*.data</code> and <code>*.index</code> file.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># first method</span></span><br><span class="line"><span class="keyword">from</span> tensorflow.python <span class="keyword">import</span> pywrap_tensorflow</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    reader = pywrap_tensorflow.NewCheckpointReader(<span class="string">'xxx/yyy.ckpt'</span>)</span><br><span class="line">    <span class="comment"># need *.index to get key (variable names)</span></span><br><span class="line">    <span class="keyword">for</span> key <span class="keyword">in</span> reader.get_variable_to_shape_map():</span><br><span class="line">        print(key)</span><br><span class="line">        <span class="comment"># it need *.data-xxx to get variable value</span></span><br><span class="line">        print(reader.get_tensor(key))</span><br><span class="line"><span class="comment"># second method</span></span><br><span class="line"><span class="comment"># this way also need the *.index and *.data-xxx file.</span></span><br><span class="line"><span class="keyword">from</span> tensorflow.python.tools.inspect_checkpoint <span class="keyword">import</span> print_tensors_in_checkpoint_file</span><br><span class="line">print_tensors_in_checkpoint_file(<span class="string">'xxx/yyy.ckpt'</span>, <span class="literal">None</span>, <span class="literal">True</span>, <span class="literal">True</span>)</span><br></pre></td></tr></table></figure></p><h2 id="view-the-model-graph-on-the-model"><a href="#view-the-model-graph-on-the-model" class="headerlink" title="view the model graph on the model"></a>view the model graph on the model</h2><p>In this way, you can get the model graph such as: variable names, operation names, the inputs operation need and so on. this method only need *.ckpt.meta. Using this method, you can find the placehold name.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="comment"># load model graph</span></span><br><span class="line">    saver = tf.train.import_meta_graph(<span class="string">'xxx/yyy.ckpt.meta'</span>)</span><br><span class="line">    graph = tf.get_default_graph()</span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> graph.as_graph_def().node:</span><br><span class="line">        print(v.name)               <span class="comment"># get the graph node name</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> v.input == []:</span><br><span class="line">            print(<span class="string">'\t'</span>, v.input)    <span class="comment"># get the node input item</span></span><br></pre></td></tr></table></figure></p><h2 id="get-the-tensor-from-the-model-and-start-model"><a href="#get-the-tensor-from-the-model-and-start-model" class="headerlink" title="get the tensor from the model and start model"></a>get the tensor from the model and start model</h2><p>for using this mothed, you need *.data-xxx file to load model weights. you can get the tensor name from model graph.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="comment"># load model graph</span></span><br><span class="line">    saver = tf.train.import_meta_graph(<span class="string">'xxx/yyy.ckpt.meta'</span>)</span><br><span class="line">    <span class="comment"># load model weights</span></span><br><span class="line">    saver.restore(sess, <span class="string">'xxx/yyy.ckpt'</span>)</span><br><span class="line">    graph = tf.get_default_graph()</span><br><span class="line">    input1 = graph.get_tensor_by_name(<span class="string">'xxx/w1:0'</span>)</span><br><span class="line">    input2 = graph.get_tensor_by_name(<span class="string">'xxx/w2:0'</span>)</span><br><span class="line">    op = graph.get_tensor_by_name(<span class="string">'xxx/op_add:0'</span>)</span><br><span class="line">    print(sess.run(op, feed_dict=&#123;input1:<span class="number">1</span>, input2:<span class="number">2</span>&#125;))</span><br></pre></td></tr></table></figure></p><h2 id="add-another-operation-on-the-model-graph-seved"><a href="#add-another-operation-on-the-model-graph-seved" class="headerlink" title="add another operation on the model graph seved"></a>add another operation on the model graph seved</h2><p>using the operation get from the model graph saved, you can add another operation on it.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    saver = tf.trian.import_meta_graph(<span class="string">'xxx/yyy.ckpt.meta'</span>)</span><br><span class="line">    saver.restore(sess, <span class="string">'xxx/yyy.ckpt'</span>)</span><br><span class="line">    graph = tf.get_default_graph()</span><br><span class="line">    input1 = graph.get_tensors_by_name(<span class="string">'w1:0'</span>)</span><br><span class="line">    input2 = graph.get_tensors_by_name(<span class="string">'w2:0'</span>)</span><br><span class="line">    op = graph.get_tensors_by_name(<span class="string">'op_add:0'</span>)</span><br><span class="line">    add_op = tf.multiply(op, <span class="number">2.0</span>)       <span class="comment"># another operation </span></span><br><span class="line">    print(sess.run(add_op))</span><br></pre></td></tr></table></figure></p><h2 id="add-another-operation-on-the-part-of-the-model-graph-saved"><a href="#add-another-operation-on-the-part-of-the-model-graph-saved" class="headerlink" title="add another operation on the part of the model graph saved"></a>add another operation on the part of the model graph saved</h2><p>by using the operation not the last one, you can only operate a part of the model saved.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">output_n = <span class="number">3</span></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    saver = tf.train.import_meta_graph(<span class="string">'Vgg.meta'</span>)</span><br><span class="line">    graph = tf.get_default_graph()</span><br><span class="line">    fc7 = graph.get_tensors_by_name(<span class="string">'fc7;0'</span>)</span><br><span class="line">    fc7 = tf.stop_gradient(fc7)             <span class="comment"># stop the gradient spread to the model saved.</span></span><br><span class="line">    fc7_shape = fc7.get_shape().as_list()</span><br><span class="line">    weights = tf.Variable(tf.truncated_normal([fc7_shape[<span class="number">3</span>], output_n], stddev=<span class="number">0.1</span>))</span><br><span class="line">    output = tf.matmul(fc7, weights)</span><br><span class="line">    pred = tf.nn.softmax(output)</span><br></pre></td></tr></table></figure></p><h2 id="note"><a href="#note" class="headerlink" title="note:"></a>note:</h2><ul><li>model weigths is saved in the model data <code>*.data-xxx</code>, however placehold is in the model graph <code>*.meta</code>.</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;save model using tensorflow; read the model file saved to view model weights and structure. Also, you can wiew the model structure you build.&lt;br&gt;
    
    </summary>
    
      <category term="tensorflow" scheme="http://192.168.0.186/categories/tensorflow/"/>
    
    
      <category term="python" scheme="http://192.168.0.186/tags/python/"/>
    
      <category term="tensorflow" scheme="http://192.168.0.186/tags/tensorflow/"/>
    
      <category term="graph" scheme="http://192.168.0.186/tags/graph/"/>
    
  </entry>
  
  <entry>
    <title>tensorflow-variables</title>
    <link href="http://192.168.0.186/2019/07/02/tensorflow-variables/"/>
    <id>http://192.168.0.186/2019/07/02/tensorflow-variables/</id>
    <published>2019-07-02T03:26:35.000Z</published>
    <updated>2019-07-10T12:09:30.897Z</updated>
    
    <content type="html"><![CDATA[<p>variables on the tensorflow, it’s about local, global, model and trainable veriables.<br><a id="more"></a></p><h1 id="local-variables"><a href="#local-variables" class="headerlink" title="local variables"></a>local variables</h1><p>It’s a variable, but it is defined in<code>tf.GraphKeys.LOCAL_VARIABLES</code>, and you can view it by the following command. Just like it’s name, as a local variable, it will not be saved to <code>checkpoint</code> file by default.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">local_variables = tf.get_collection(tf.GraphKeys.LOCAL_VARIABLES)</span><br><span class="line">print(sess.run(local_variables))</span><br></pre></td></tr></table></figure></p><p>The variable defined by default is a global variable, but you can get a local variable by the following method.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">local_variable = tf.Variable(<span class="number">6</span>, name=<span class="string">'var_l'</span>, collections=[tf.GraphKeys.LOCAL_VARIABLES])</span><br></pre></td></tr></table></figure></p><p><strong>note:</strong> without any statement, the variables you get in the model and function are also global variables.</p><h1 id="gloable-variables"><a href="#gloable-variables" class="headerlink" title="gloable variables"></a>gloable variables</h1><p>It’s the most common variable used in the tensorflow code, and you can get it on the function or model. they are added to the collection,<code>tf.GraphKeys.GLOBAL_VARIABLES</code>, and you can view them by the following method.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">global_variables = tf.get_collection(tf.GraphKeys.GLOBAL_VARIABLES)</span><br><span class="line">print(sess.run(global_variables))</span><br></pre></td></tr></table></figure></p><h1 id="model-variables"><a href="#model-variables" class="headerlink" title="model variables"></a>model variables</h1><p>It’s defined inside the model, and added to the collection, <code>tf.GraphKeys.MODEL_VARIABLES)</code>. you can view them by the following command.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model_variables = tf.get_collection(tf.GraphKeys.MODEL_VARIABLES)</span><br><span class="line">print(sess.run(MODEL_variables))</span><br></pre></td></tr></table></figure></p><h1 id="trainable-variables"><a href="#trainable-variables" class="headerlink" title="trainable variables"></a>trainable variables</h1><p>It’s defined inside the model. In the proces of training, it will be trained. you can find it on the collection, <code>tf.GraphKeys.TRAINABLE_VARIABLES</code>. View them by the following command.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">trainable_variables = tf.get_collection(tf.GraphKeys.TRAINABLE_VARIABLES)</span><br><span class="line">print(sess.run(MODEL_variables))</span><br></pre></td></tr></table></figure></p><h1 id="a-example-to-understand-it"><a href="#a-example-to-understand-it" class="headerlink" title="a example to understand it"></a>a example to understand it</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">some_func</span><span class="params">()</span>:</span></span><br><span class="line">    z = tf.Variable(<span class="number">1</span>, name=<span class="string">'var_z'</span>)</span><br><span class="line"></span><br><span class="line">a = tf.Variable(<span class="number">1</span>, name=<span class="string">'var_a'</span>)</span><br><span class="line"><span class="comment"># get_variable can get a variable existed </span></span><br><span class="line"><span class="comment"># or create a variable that does't exist</span></span><br><span class="line">b = tf.get_variable(<span class="string">'var_b'</span>, <span class="number">2</span>)</span><br><span class="line"><span class="keyword">with</span> tf.name_scope(<span class="string">'aaa'</span>):</span><br><span class="line">    c = tf.Variable(<span class="number">3</span>, name=<span class="string">'var_c'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.variable_scope(<span class="string">'bbb'</span>):</span><br><span class="line">    d = tf.Variable(<span class="number">3</span>, name=<span class="string">'var_d'</span>)</span><br><span class="line"></span><br><span class="line">some_func()</span><br><span class="line">some_func()</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> ([str(i.name) <span class="keyword">for</span> i <span class="keyword">in</span> tf.global_variables()])</span><br><span class="line"><span class="keyword">print</span> ([str(i.name) <span class="keyword">for</span> i <span class="keyword">in</span> tf.local_variables()])</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">[<span class="string">'var_a:0'</span>, <span class="string">'var_b:0'</span>, <span class="string">'aaa/var_c:0'</span>, <span class="string">'bbb/var_d:0'</span>, <span class="string">'var_z:0'</span>, <span class="string">'var_z_1:0'</span>]</span><br><span class="line">[]</span><br></pre></td></tr></table></figure><p>The order in the list is the order in which variables are creted. variables in a function are only established when the function is executed, so there are two variables about <code>var_z</code></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;variables on the tensorflow, it’s about local, global, model and trainable veriables.&lt;br&gt;
    
    </summary>
    
      <category term="tensorflow" scheme="http://192.168.0.186/categories/tensorflow/"/>
    
    
      <category term="python" scheme="http://192.168.0.186/tags/python/"/>
    
      <category term="tensorflow" scheme="http://192.168.0.186/tags/tensorflow/"/>
    
      <category term="variables" scheme="http://192.168.0.186/tags/variables/"/>
    
  </entry>
  
  <entry>
    <title>python-numpy</title>
    <link href="http://192.168.0.186/2019/07/02/python-numpy/"/>
    <id>http://192.168.0.186/2019/07/02/python-numpy/</id>
    <published>2019-07-02T03:20:49.000Z</published>
    <updated>2019-07-10T12:08:57.756Z</updated>
    
    <content type="html"><![CDATA[<p>numpy using and functions.<br><a id="more"></a><br><!--need handle--></p><h1 id="function"><a href="#function" class="headerlink" title="function"></a>function</h1><h2 id="np-random-shuffle-data"><a href="#np-random-shuffle-data" class="headerlink" title="np.random.shuffle(data)"></a>np.random.shuffle(data)</h2><p>it can shuffle a data structure such as numpy array or list. and this function don’t return any value, it do this operation on the data itself.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data_list = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]</span><br><span class="line">data_array = np.arange(<span class="number">16</span>).reshape([<span class="number">4</span>, <span class="number">4</span>])</span><br><span class="line">np.random.shuffle(data_list)    </span><br><span class="line">np.random.shuffle(data_array)</span><br></pre></td></tr></table></figure></p><h2 id="np-squeeze-data-axis-None"><a href="#np-squeeze-data-axis-None" class="headerlink" title="np.squeeze(data, axis=None)"></a>np.squeeze(data, axis=None)</h2><p>squeeze the data array.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(<span class="number">4</span>).reshape([<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>])</span><br><span class="line">a.shape =&gt; [1,2,2,1]</span><br><span class="line">b = np.squeeze(a)</span><br><span class="line">b.shape =&gt; [2,2]</span><br></pre></td></tr></table></figure></p><h1 id="using"><a href="#using" class="headerlink" title="using"></a>using</h1>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;numpy using and functions.&lt;br&gt;
    
    </summary>
    
      <category term="python" scheme="http://192.168.0.186/categories/python/"/>
    
    
      <category term="python" scheme="http://192.168.0.186/tags/python/"/>
    
      <category term="numpy" scheme="http://192.168.0.186/tags/numpy/"/>
    
  </entry>
  
  <entry>
    <title>npm-cmd</title>
    <link href="http://192.168.0.186/2019/07/02/npm-cmd/"/>
    <id>http://192.168.0.186/2019/07/02/npm-cmd/</id>
    <published>2019-07-02T03:14:54.000Z</published>
    <updated>2019-07-10T12:08:55.144Z</updated>
    
    <content type="html"><![CDATA[<p>the using of the npm<br><a id="more"></a></p><h1 id="common-command"><a href="#common-command" class="headerlink" title="common command"></a>common command</h1><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><h3 id="install-on-the-local-project"><a href="#install-on-the-local-project" class="headerlink" title="install on the local project"></a>install on the local project</h3><p>this way will install package to <code>./node_modules</code>, and it is only alive on the local project.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install modulename</span><br></pre></td></tr></table></figure></p><h3 id="install-on-the-global-project"><a href="#install-on-the-global-project" class="headerlink" title="install on the global project"></a>install on the global project</h3><p>this way will install package on <code>./usr/local</code> or node.js installing folder, and you can use them on the system terminal.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install modulename -g</span><br></pre></td></tr></table></figure></p><h2 id="uninstall"><a href="#uninstall" class="headerlink" title="uninstall"></a>uninstall</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall modulename</span><br></pre></td></tr></table></figure><h2 id="list-moldule"><a href="#list-moldule" class="headerlink" title="list moldule"></a>list moldule</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm list  <span class="comment">// view the local installing module</span></span><br><span class="line">npm list -g <span class="comment">// view the global installing module</span></span><br><span class="line">npm list modulename <span class="comment">// view the module installing message</span></span><br></pre></td></tr></table></figure><h2 id="change-the-domestic-registry"><a href="#change-the-domestic-registry" class="headerlink" title="change the domestic registry"></a>change the domestic registry</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="keyword">get</span> registry # view the default registry</span><br><span class="line">npm config <span class="keyword">set</span> registry http://registry.npm.taobao.org # change the default registry to the Ali registry</span><br></pre></td></tr></table></figure><h2 id="show-the-installing-progress"><a href="#show-the-installing-progress" class="headerlink" title="show the installing progress"></a>show the installing progress</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -d modulename</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;the using of the npm&lt;br&gt;
    
    </summary>
    
      <category term="linux" scheme="http://192.168.0.186/categories/linux/"/>
    
    
      <category term="npm" scheme="http://192.168.0.186/tags/npm/"/>
    
  </entry>
  
  <entry>
    <title>jupyter-setting</title>
    <link href="http://192.168.0.186/2019/07/02/jupyter-setting/"/>
    <id>http://192.168.0.186/2019/07/02/jupyter-setting/</id>
    <published>2019-07-02T03:12:57.000Z</published>
    <updated>2019-07-10T12:08:49.521Z</updated>
    
    <content type="html"><![CDATA[<p>jupyterLab, automatic completion, code tips<br><a id="more"></a><br><!--finish--></p><blockquote><p>jupyterLab is the next generation product of the jupyter </p></blockquote><h1 id="install-jupyterLab"><a href="#install-jupyterLab" class="headerlink" title="install jupyterLab"></a>install jupyterLab</h1><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install jupyterLab</span><br><span class="line">pip install ipython</span><br></pre></td></tr></table></figure><h2 id="generate-password"><a href="#generate-password" class="headerlink" title="generate password"></a>generate password</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ipython</span><br><span class="line">from notebook.auth import passwd</span><br><span class="line">passwd()</span><br></pre></td></tr></table></figure><p>copy the password generated</p><h2 id="generate-config-file"><a href="#generate-config-file" class="headerlink" title="generate config file"></a>generate config file</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter lab --generate-config</span><br></pre></td></tr></table></figure><p>adjust as the following code<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">c.NotebookApp.ip=<span class="string">'*'</span></span><br><span class="line">c.NotebookApp.allow_root = True</span><br><span class="line">c.NotebookApp.open_browser = False</span><br><span class="line">c.NotebookApp.password = <span class="string">'passwore generated'</span></span><br><span class="line">c.NotebookApp.port =8888</span><br></pre></td></tr></table></figure></p><h2 id="command"><a href="#command" class="headerlink" title="command"></a>command</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jupyter labextension install @jupyterlab/toc <span class="comment"># install plugin</span></span><br><span class="line">jupyter labextension list <span class="comment"># view the installed plugin</span></span><br><span class="line">jupyter-lab --ip=xx.xx.xx.xx <span class="comment"># start jupyterLab</span></span><br><span class="line">c.NotebookApp.notebook_dir = <span class="string">'F:\python\jupyter'</span> <span class="comment"># start dir</span></span><br></pre></td></tr></table></figure><p>Now, you can find it on your browser</p><h2 id="enable-the-plugin-ico"><a href="#enable-the-plugin-ico" class="headerlink" title="enable the plugin ico"></a>enable the plugin ico</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setting -&gt; advanced settings editor</span><br><span class="line"><span class="literal">false</span> -&gt; <span class="literal">true</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;jupyterLab, automatic completion, code tips&lt;br&gt;
    
    </summary>
    
      <category term="linux" scheme="http://192.168.0.186/categories/linux/"/>
    
    
      <category term="python" scheme="http://192.168.0.186/tags/python/"/>
    
      <category term="jupyter" scheme="http://192.168.0.186/tags/jupyter/"/>
    
  </entry>
  
  <entry>
    <title>batch-normalization</title>
    <link href="http://192.168.0.186/2019/07/02/batch-normalization/"/>
    <id>http://192.168.0.186/2019/07/02/batch-normalization/</id>
    <published>2019-07-02T03:08:25.000Z</published>
    <updated>2019-07-10T12:08:39.870Z</updated>
    
    <content type="html"><![CDATA[<p>Theory and application of batch normalization<br><!--finish--><br><a id="more"></a></p><h1 id="theory"><a href="#theory" class="headerlink" title="theory"></a>theory</h1><h2 id="提出"><a href="#提出" class="headerlink" title="提出"></a>提出</h2><p>At recent years, Batch Normalization is considered an important achievement and has proven to be effective in many applications. 虽然有些处理还解释不清楚理论原因，但是实践证明好用才是真的好。而且深度学习从Hinton对深度网络做与训练开始就是一个经验领先于理论分析的偏经验的学问。<br>机器学习领域有个很重要的假设<code>IID独立同分布假设</code>，假设训练数据和测试数据是满足相同分布的，这是通过训练数据获得的模型能够在测试数据上获得效果的一个基本保障。实际上并不是这样，Batch Normalization就是在深度网络训练过程中使得每一层网络的输入保持相同的分布。</p><h2 id="internal-covariate-shift-problem"><a href="#internal-covariate-shift-problem" class="headerlink" title="internal covariate shift problem"></a>internal covariate shift problem</h2><h3 id="covariate-shift-problem"><a href="#covariate-shift-problem" class="headerlink" title="covariate shift problem"></a>covariate shift problem</h3><p>如果数据集<x, y>中的输入数据的分布老是变化，不符合<code>IID</code>的假设，网络模型很难得到稳定。  </x,></p><h3 id="internal-covariate-shift-problem-1"><a href="#internal-covariate-shift-problem-1" class="headerlink" title="internal covariate shift problem"></a>internal covariate shift problem</h3><p>在训练的过程中，因为各层参数不定在变化，所以每个隐含层都会面临<code>convriate shift problem</code>。batch normalization的基本思想就是：能不能让每个隐含层节点的激活输入分布固定下来，以避免<code>internal convariate shift problem</code>。</p><h3 id="前人的成果"><a href="#前人的成果" class="headerlink" title="前人的成果"></a>前人的成果</h3><p>BN的想法并不是凭空出来的，之前的研究就发现在对输入图像进行白化操作的话，神经网络就会更快的收敛，所以BN的作者提出，对网络的输入数据进行白化操作能够加快收敛，那么对网络的每一个隐含层都进行白化处理会不会有更好的效果呢。</p><h2 id="Batch-Norm的本质思想"><a href="#Batch-Norm的本质思想" class="headerlink" title="Batch Norm的本质思想"></a>Batch Norm的本质思想</h2><p>深度网络训练收敛越来越慢的本质原因是梯度消失，而BN通过一定的规范化手段，把每层神经网络任意神经元的输入值的分布强行拉回到均值为0方差为1的标准正态分布，使激活函数输入值落在对输入数据比较敏感的区域。<br><strong>优点：</strong></p><ul><li>可以使用较大的学习率，能够加快模型的收敛速度。</li><li>能够起到正则化的效果，在一些情况下可以不适用Dropout，因为BN提高了模型的泛化能力。</li></ul><h2 id="how-to-do-it"><a href="#how-to-do-it" class="headerlink" title="how to do it"></a>how to do it</h2><p>对mini batch SGD来说数据从第t-1层流入第t层</p><script type="math/tex; mode=display">x_{t}=Wx_{t-1}+B</script><p>对t-1层来的数据进行变换</p><script type="math/tex; mode=display">\mu_{B}=\frac{1}{m_{B}}\sum_{i=1}^{m_{B}}x^{(i)}</script><script type="math/tex; mode=display">\sigma_{B}^2=\frac{1}{m_{B}}\sum_{i=1}^{m_{B}}(x^{(i)}-\mu_{B})^2</script><script type="math/tex; mode=display">\hat{x}^{(k)}=\frac{x^{(k)}-E[x^{(k)}]}{\sqrt{Var[x^{(x)}]}}</script><p>为了保证网络的表达能力对变换后的数据流进行线性变换，是对数据分布的重构其中$\gamma$和$\beta$是无门需要学习的参数</p><script type="math/tex; mode=display">y^{(k)}=\gamma^{(k)}\hat{x}^{(k)}+\beta^{(k)}</script><h2 id="推理过程"><a href="#推理过程" class="headerlink" title="推理过程"></a>推理过程</h2><p>在mini-batch中先计算出每一个batch中的均值和方差，然后根据一下方法计算出全局的均值和方差</p><script type="math/tex; mode=display">E[x]\gets{E_{B}[\mu_{B}]}</script><script type="math/tex; mode=display">Var[x]\gets\frac{m}{m-1}E_{B}[\sigma_{B}^{2}]</script><script type="math/tex; mode=display">y=\frac{\gamma}{\sqrt{Var[x]+\varepsilon}}\cdot{x}+(\beta-\frac{\gamma\cdot{E[x]}}{\sqrt{Var[x]+\varepsilon}})</script><h1 id="application"><a href="#application" class="headerlink" title="application"></a>application</h1><p>batch normalization在实现的时候会记录下训练数据中的均值和方差，记为: moving_mean, moving_variance，在训练的时候用moving_mean, moving_ariance进行计算，这也就是参数training的作用，在实现时一般使用一个decay系数来逐步更显moving_mean, moving_variance。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">moving_mean = moving_mean * decay + new_batch_mean*(<span class="number">1</span>-decay)</span><br></pre></td></tr></table></figure></p><p>在batch normalization中更新mean和variance的操作并不会自动执行，它们会保存在tf.GraphKeys.UPDATE_OPS集合中，这些操作需要在模型进行计算之前执行。如下所示<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">update_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS)</span><br><span class="line"><span class="keyword">with</span> tf.control_dependencies(updata_ops):</span><br><span class="line">    train_op = optimizer.minize(loss)</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Theory and application of batch normalization&lt;br&gt;&lt;!--finish--&gt;&lt;br&gt;
    
    </summary>
    
      <category term="tensorflow" scheme="http://192.168.0.186/categories/tensorflow/"/>
    
    
      <category term="python" scheme="http://192.168.0.186/tags/python/"/>
    
      <category term="tensorflow" scheme="http://192.168.0.186/tags/tensorflow/"/>
    
      <category term="slim" scheme="http://192.168.0.186/tags/slim/"/>
    
  </entry>
  
  <entry>
    <title>git-cmd</title>
    <link href="http://192.168.0.186/2019/07/02/git-cmd/"/>
    <id>http://192.168.0.186/2019/07/02/git-cmd/</id>
    <published>2019-07-02T02:55:38.000Z</published>
    <updated>2019-07-10T12:08:42.696Z</updated>
    
    <content type="html"><![CDATA[<p>git command<br><a id="more"></a><br><!--finish--></p><h2 id="test-the-ssh-key"><a href="#test-the-ssh-key" class="headerlink" title="test the ssh key"></a>test the ssh key</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github</span><br></pre></td></tr></table></figure><p>If it’s working, you will get the following response<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi xxx! You<span class="string">'ve successfully authenticated, but GitHub does not provide shell access.</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;git command&lt;br&gt;
    
    </summary>
    
      <category term="linux" scheme="http://192.168.0.186/categories/linux/"/>
    
    
      <category term="git" scheme="http://192.168.0.186/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>matplotlib</title>
    <link href="http://192.168.0.186/2019/07/02/matplotlib/"/>
    <id>http://192.168.0.186/2019/07/02/matplotlib/</id>
    <published>2019-07-02T02:53:19.000Z</published>
    <updated>2019-07-10T12:08:53.863Z</updated>
    
    <content type="html"><![CDATA[<p>matplotlib using and Error<br><a id="more"></a></p><h1 id="using"><a href="#using" class="headerlink" title="using"></a>using</h1><h2 id="save-picture"><a href="#save-picture" class="headerlink" title="save picture"></a>save picture</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">y = np.sin(x)</span><br><span class="line">plt.plot(y)</span><br><span class="line">plt.savefig(filename, dpi=xxx)</span><br></pre></td></tr></table></figure><p>dpi is the optional parameter for the picture, use it to choose the quality of the image.</p><h2 id="use-multiple-drawing-boxes"><a href="#use-multiple-drawing-boxes" class="headerlink" title="use multiple drawing boxes"></a>use multiple drawing boxes</h2><p>don’t use plt.show on the end of the picture, you will get two picture on once.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(<span class="number">1</span>)</span><br><span class="line">plt.plot(x)</span><br><span class="line">plt.figure(<span class="number">2</span>)</span><br><span class="line">plt.plot(y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></p><h2 id="close-drawing-axis"><a href="#close-drawing-axis" class="headerlink" title="close drawing axis"></a>close drawing axis</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.axis(<span class="string">'off'</span>)</span><br></pre></td></tr></table></figure><h2 id="dynamic-display"><a href="#dynamic-display" class="headerlink" title="dynamic display"></a>dynamic display</h2><p>you can dynamic display picture and analyse the data change.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(..):</span><br><span class="line">  plt.clf()</span><br><span class="line">  plt.plot(data[i])</span><br><span class="line">  plt.pause(delay_time)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></p><p>if you want to see the history data, do not use the clear command.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(..):</span><br><span class="line">  plt.plot(data[i])</span><br><span class="line">  plt.pause(delay_time)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></p><h1 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h1><h2 id="RuntimeError-Invalid-DISPLAY-variable"><a href="#RuntimeError-Invalid-DISPLAY-variable" class="headerlink" title="RuntimeError: Invalid DISPLAY variable"></a>RuntimeError: Invalid DISPLAY variable</h2><p><strong>reason:</strong><br>the default backend of the matplotlib is <code>TkAgg</code>, but the <code>FltAgg</code>, <code>GTK</code>, <code>GTKCairo</code>, <code>TkAgg</code> need the GUI. So it will meet error when using ssh<br><strong>solution:</strong><br>you can use this backend, <code>Agg</code>, <code>Cairo</code>, <code>PS</code>, <code>PDF</code> and <code>SVG</code>, they don’t need GUI.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.switch_backend(<span class="string">'agg)</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;matplotlib using and Error&lt;br&gt;
    
    </summary>
    
      <category term="python" scheme="http://192.168.0.186/categories/python/"/>
    
    
      <category term="python" scheme="http://192.168.0.186/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>http-raspberry</title>
    <link href="http://192.168.0.186/2019/07/02/http-raspberry/"/>
    <id>http://192.168.0.186/2019/07/02/http-raspberry/</id>
    <published>2019-07-02T02:45:56.000Z</published>
    <updated>2019-07-10T12:08:48.307Z</updated>
    
    <content type="html"><![CDATA[<p>build a http server on raspberry centos7.<br><a id="more"></a><br><!--fihish--></p><h1 id="install-httpd"><a href="#install-httpd" class="headerlink" title="install httpd"></a>install httpd</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install httpd</span><br></pre></td></tr></table></figure><h1 id="config-httpd-configure-file"><a href="#config-httpd-configure-file" class="headerlink" title="config httpd configure file"></a>config httpd configure file</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/httpd/conf/httpd.conf</span><br><span class="line">&gt;&gt; </span><br><span class="line">Listen 80       <span class="comment"># http listen port</span></span><br><span class="line">DocumentRoot <span class="string">"/var/www/html"</span>    <span class="comment"># the html file directory</span></span><br></pre></td></tr></table></figure><h1 id="view-the-port-using"><a href="#view-the-port-using" class="headerlink" title="view the port using"></a>view the port using</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd  --query-port=80/tcp</span><br><span class="line">firewall-cmd  --query-port=80/udp</span><br></pre></td></tr></table></figure><p>if you get ‘no’, this neams the port is free.</p><h1 id="open-the-80-port-fot-the-http-server"><a href="#open-the-80-port-fot-the-http-server" class="headerlink" title="open the 80 port fot the http server"></a>open the 80 port fot the http server</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd  --permanent  --zone=public  --add-port=80/tcp</span><br><span class="line">firewall-cmd  --permanent  --zone=public  --add-port=80/udp</span><br></pre></td></tr></table></figure><h1 id="restart-firewall"><a href="#restart-firewall" class="headerlink" title="restart firewall"></a>restart firewall</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><h1 id="start-httpd-service"><a href="#start-httpd-service" class="headerlink" title="start httpd service"></a>start httpd service</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service httpd start</span><br></pre></td></tr></table></figure><h1 id="set-service-boot-on-system-boot"><a href="#set-service-boot-on-system-boot" class="headerlink" title="set service boot on system boot"></a>set service boot on system boot</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable httpd</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;build a http server on raspberry centos7.&lt;br&gt;
    
    </summary>
    
      <category term="server" scheme="http://192.168.0.186/categories/server/"/>
    
    
      <category term="raspberry" scheme="http://192.168.0.186/tags/raspberry/"/>
    
      <category term="centos7" scheme="http://192.168.0.186/tags/centos7/"/>
    
      <category term="http server" scheme="http://192.168.0.186/tags/http-server/"/>
    
  </entry>
  
  <entry>
    <title>raspberry-system-install</title>
    <link href="http://192.168.0.186/2019/07/02/raspberry-system-install/"/>
    <id>http://192.168.0.186/2019/07/02/raspberry-system-install/</id>
    <published>2019-07-02T02:42:20.000Z</published>
    <updated>2019-07-10T12:09:00.644Z</updated>
    
    <content type="html"><![CDATA[<p>install raspberry centos7<br><a id="more"></a><br><!-- fnish --></p><h1 id="install-centos7"><a href="#install-centos7" class="headerlink" title="install centos7"></a>install centos7</h1><h2 id="download-system"><a href="#download-system" class="headerlink" title="download system"></a>download system</h2><p>choose the system you need from <a href="http://mirrors.huaweicloud.com/centos-altarch/7.6.1810/isos/armhfp/" target="_blank" rel="noopener">Centos system website</a>. and choose the raspberryPi GNOME system.</p><h2 id="formate-SD-card"><a href="#formate-SD-card" class="headerlink" title="formate SD card"></a>formate SD card</h2><p>use <a href="https://www.sdcard.org/downloads/formatter/eula_windows/" target="_blank" rel="noopener">SD card formatter</a> to fromate your SD card.</p><h2 id="install-system"><a href="#install-system" class="headerlink" title="install system"></a>install system</h2><p>use <a href="https://sourceforge.net/projects/win32diskimager/" target="_blank" rel="noopener">Win32DiskImager</a> to install centos system to your SD card.</p><h2 id="log-in-system"><a href="#log-in-system" class="headerlink" title="log in system"></a>log in system</h2><p>default user and password<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">user:</span>       <span class="string">root</span></span><br><span class="line"><span class="attr">password:</span>   <span class="string">centos</span></span><br></pre></td></tr></table></figure></p><h2 id="expend-SD-free-space"><a href="#expend-SD-free-space" class="headerlink" title="expend SD free space"></a>expend SD free space</h2><p>when you log in system, you will find little exsiting space of the system. you can expend the SD card free space for the system by the following command.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rootfs-expand</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;install raspberry centos7&lt;br&gt;
    
    </summary>
    
      <category term="linux" scheme="http://192.168.0.186/categories/linux/"/>
    
    
      <category term="raspberry" scheme="http://192.168.0.186/tags/raspberry/"/>
    
      <category term="centos7" scheme="http://192.168.0.186/tags/centos7/"/>
    
  </entry>
  
  <entry>
    <title>activate-function</title>
    <link href="http://192.168.0.186/2019/07/02/activate-function/"/>
    <id>http://192.168.0.186/2019/07/02/activate-function/</id>
    <published>2019-07-02T02:40:15.000Z</published>
    <updated>2019-07-10T12:08:24.021Z</updated>
    
    <content type="html"><![CDATA[<p>activate function<br><a id="more"></a></p><h1 id="ELU"><a href="#ELU" class="headerlink" title="ELU"></a>ELU</h1><script type="math/tex; mode=display">f(x)=\Big\{ { {x \atop \alpha(e^2-1)} \quad {x>0 \atop x \le 0}}</script><h1 id="LReLU"><a href="#LReLU" class="headerlink" title="LReLU"></a>LReLU</h1><script type="math/tex; mode=display">f(x_i)=\Big\{ { {x_i \atop a_i x_i} \quad { x_i >0 \atop x_i \le 0}}</script><p>where $a_i$ is a constant number. You can set it by the following command<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tf.nn.leky_relu(features, aplpha=a, name=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure></p><h1 id="PReLU"><a href="#PReLU" class="headerlink" title="PReLU"></a>PReLU</h1><script type="math/tex; mode=display">f(x)=\Big\{ { {x_i \atop a_i x_i} \quad {x_i > 0 \atop x_i \le 0}}</script><p>where $a_i$ can be adjust during the training process.</p><h1 id="CReLU"><a href="#CReLU" class="headerlink" title="CReLU"></a>CReLU</h1><script type="math/tex; mode=display">CReLU(X) = [ReLU(x),ReLU(-x)]</script><p>you can use the following command to use this function.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tf.nn.crelu(features, name=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure></p><h1 id="ELU-1"><a href="#ELU-1" class="headerlink" title="ELU"></a>ELU</h1><script type="math/tex; mode=display">f(x) = \Big\{ { { x \atop \alpha(e^2-1)} \quad {x>0 \atop x\le 0}}</script><p>using the following command, you can use this function.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tf.nelu(features, name=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure></p><h1 id="SELU"><a href="#SELU" class="headerlink" title="SELU"></a>SELU</h1><script type="math/tex; mode=display">f(x)=\lambda\Big\{ { { x \atop \alpha(e^x-1)} \quad {x>0 \atop x\le 0}}</script><p>the function in the tensorflow is like the following one<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tf.nn.selu(features, name=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;activate function&lt;br&gt;
    
    </summary>
    
      <category term="tensorflow" scheme="http://192.168.0.186/categories/tensorflow/"/>
    
    
      <category term="network" scheme="http://192.168.0.186/tags/network/"/>
    
  </entry>
  
  <entry>
    <title>sftp-cmd</title>
    <link href="http://192.168.0.186/2019/06/28/sftp-cmd/"/>
    <id>http://192.168.0.186/2019/06/28/sftp-cmd/</id>
    <published>2019-06-28T08:14:10.000Z</published>
    <updated>2019-07-10T12:09:16.607Z</updated>
    
    <content type="html"><![CDATA[<p>using of the sftp<br><a id="more"></a></p><h1 id="common-command"><a href="#common-command" class="headerlink" title="common command"></a>common command</h1><h2 id="log-in"><a href="#log-in" class="headerlink" title="log in"></a>log in</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sftp user@ip</span><br></pre></td></tr></table></figure><h2 id="log-out"><a href="#log-out" class="headerlink" title="log out"></a>log out</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span> <span class="comment"># function 1</span></span><br><span class="line">quit <span class="comment"># function 2</span></span><br></pre></td></tr></table></figure><h2 id="put"><a href="#put" class="headerlink" title="put"></a>put</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">put file            <span class="comment"># upload a file</span></span><br><span class="line">put -r directory    <span class="comment"># recurisively upload a folder</span></span><br></pre></td></tr></table></figure><h2 id="get"><a href="#get" class="headerlink" title="get"></a>get</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">get file            <span class="comment"># download a file</span></span><br><span class="line">get -r directory    <span class="comment"># recurisively download a folder</span></span><br></pre></td></tr></table></figure><h2 id="show-current-folder-path"><a href="#show-current-folder-path" class="headerlink" title="show current folder path"></a>show current folder path</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span>     <span class="comment"># show the remote folder path</span></span><br><span class="line">lpwd    <span class="comment"># show the local folder paht</span></span><br></pre></td></tr></table></figure><h2 id="show-files-and-directory-in-the-cuttent-directory"><a href="#show-files-and-directory-in-the-cuttent-directory" class="headerlink" title="show files and directory in the cuttent directory"></a>show files and directory in the cuttent directory</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls      <span class="comment"># show the remote files and folder on the remote directory</span></span><br><span class="line">lls     <span class="comment"># show the local files and folder</span></span><br></pre></td></tr></table></figure><h2 id="delete-file-or-folder"><a href="#delete-file-or-folder" class="headerlink" title="delete file or folder"></a>delete file or folder</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm file         <span class="comment"># delete the file</span></span><br><span class="line">rmdir folder    <span class="comment"># delete the folder, the folder must be empth.</span></span><br></pre></td></tr></table></figure><h1 id="environmental-configuration"><a href="#environmental-configuration" class="headerlink" title="environmental configuration"></a>environmental configuration</h1><h2 id="add-a-common-user-for-the-sftp-server"><a href="#add-a-common-user-for-the-sftp-server" class="headerlink" title="add a common user for the sftp server"></a>add a common user for the sftp server</h2><p>the common user can be used for the <code>hexo deploy</code></p><ul><li>create sftp group</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd sftp</span><br></pre></td></tr></table></figure><ul><li>create a user for sftp group</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -g sftp xxx</span><br></pre></td></tr></table></figure><ul><li>specity a directory for the user</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -d xxx/sftp/sftp1 sftp1</span><br></pre></td></tr></table></figure><ul><li>restart sshd service</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service sshd restart</span><br></pre></td></tr></table></figure><h2 id="without-password-log-in-sftp"><a href="#without-password-log-in-sftp" class="headerlink" title="without password log in sftp"></a>without password log in sftp</h2><h3 id="add-the-sftp-user"><a href="#add-the-sftp-user" class="headerlink" title="add the sftp user"></a>add the sftp user</h3><ul><li>confirm the openssh version, it must greter 4.8p.</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -V</span><br></pre></td></tr></table></figure><ul><li>create sftp group</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd sftp</span><br></pre></td></tr></table></figure><ul><li>create a sftp user named sftp1</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd -g sftp -s /sbin/nologin sftp1  <span class="comment"># reject user login with polite language</span></span><br><span class="line">useradd -g sftp -s /bin/<span class="literal">false</span> sftp1     <span class="comment"># reject user login without any tip</span></span><br></pre></td></tr></table></figure><ul><li>specify a directory for the sftp user</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p xxx/sftp/sftp1         <span class="comment"># -p means that if sftp folder is not existed, the command will creat one.</span></span><br><span class="line">usermod -d xxx/sftp/sftp1 sftp1 <span class="comment"># specify a home directory for sftp1 user</span></span><br></pre></td></tr></table></figure><ul><li>config the sshd_config file</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line">&gt;&gt;</span><br><span class="line">comment the following one</span><br><span class="line">Subsystem      sftp    /usr/libexec/openssh/sftp-server</span><br><span class="line">&gt;&gt; add the following lines</span><br><span class="line">Subsystem sftp internal-sftp</span><br><span class="line">Match Group sftp                    <span class="comment"># user group</span></span><br><span class="line">ChrootDirectory xxx/sftp/sftp1      <span class="comment"># user home directory</span></span><br><span class="line">ForceCommand    internal-sftp</span><br><span class="line">AllowTcpForwarding no</span><br><span class="line">X11Forwarding no</span><br></pre></td></tr></table></figure><ul><li>set directory permissions</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown root:sftp xxx/sftp/sftp1  <span class="comment"># set the directory belong to root user and sftp group.</span></span><br><span class="line">chmod 755 xxx/sftp/sftp1        <span class="comment"># set the permissions</span></span><br></pre></td></tr></table></figure><ul><li>disable linux security enhanced module</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/selinux/config</span><br><span class="line">&gt;&gt; config</span><br><span class="line">SELINUX=<span class="built_in">disable</span>     <span class="comment"># disable the module</span></span><br><span class="line">&gt;&gt; <span class="built_in">exit</span></span><br><span class="line">setenforce 0        <span class="comment"># close selinux firewall</span></span><br></pre></td></tr></table></figure><ul><li>restart sftp service</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service sshd restart</span><br></pre></td></tr></table></figure><ul><li>confirm the sftp service</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sftp sftp1@xx.xx.xx.xx</span><br></pre></td></tr></table></figure><p>log in the sftp server using user and password. if it work, the configure is right.</p><h3 id="config-the-key"><a href="#config-the-key" class="headerlink" title="config the key"></a>config the key</h3><ul><li>create key on the client computer</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure><p>you can get two file on the ~/.ssh directory.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">id_rsa          <span class="comment"># private key</span></span><br><span class="line">id_rsa.pub      <span class="comment"># public key</span></span><br></pre></td></tr></table></figure></p><ul><li>move the public key to the server and rename it authorized_keys</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">client home path/.ssh/id_rsa.pub -&gt; server home path/.ssh/id_rsa.pub</span><br><span class="line">cat id_rsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure><ul><li>set the pressions for the directory .ssh</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown sftp1:sftp xxx/sftp/sftp1/.ssh</span><br></pre></td></tr></table></figure><ul><li>confirm the user login</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sftp sftp1@xxx.xxx.xxx.xxx</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;using of the sftp&lt;br&gt;
    
    </summary>
    
      <category term="linux" scheme="http://192.168.0.186/categories/linux/"/>
    
    
      <category term="linux" scheme="http://192.168.0.186/tags/linux/"/>
    
      <category term="sftp" scheme="http://192.168.0.186/tags/sftp/"/>
    
  </entry>
  
  <entry>
    <title>raspberry-centos7-ip</title>
    <link href="http://192.168.0.186/2019/06/28/raspberry-centos7-ip/"/>
    <id>http://192.168.0.186/2019/06/28/raspberry-centos7-ip/</id>
    <published>2019-06-28T06:45:07.000Z</published>
    <updated>2019-07-10T12:08:59.169Z</updated>
    
    <content type="html"><![CDATA[<p>setting for static ip on the raspberry centos.<br><a id="more"></a><br><!--fnished--></p><h1 id="set-the-ip-configure-file"><a href="#set-the-ip-configure-file" class="headerlink" title="set the ip configure file"></a>set the ip configure file</h1><p>If you can’t find the configure file <code>ifcfg-eth0</code> on the raspberry centos system, you could create it for the system by the following command.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-eth0</span><br></pre></td></tr></table></figure></p><p>and add or adjust the content as the following.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0                     <span class="comment"># device name</span></span><br><span class="line">BOOTPROTO=static                <span class="comment"># using static ip</span></span><br><span class="line">BROADCAST=192.168.0.255</span><br><span class="line">HWADDR=b8:27:eb:8a:cb:58        <span class="comment"># hwadd (also called ether)</span></span><br><span class="line">IPADDR=192.168.0.186            <span class="comment"># static ip</span></span><br><span class="line">IPV6INIT=no</span><br><span class="line">IPV6_AUTOCONF=no</span><br><span class="line">NETMASK=255.255.255.0           <span class="comment"># netmask</span></span><br><span class="line">GATEWAY=192.168.0.1             <span class="comment"># default gateway</span></span><br><span class="line"><span class="comment"># DNS1=114.114.114.114          # DNS</span></span><br><span class="line">ONBOOT=yes                      <span class="comment"># using this config on boot</span></span><br></pre></td></tr></table></figure></p><h1 id="restart-the-server"><a href="#restart-the-server" class="headerlink" title="restart the server"></a>restart the server</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service network restart</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;setting for static ip on the raspberry centos.&lt;br&gt;
    
    </summary>
    
      <category term="linux" scheme="http://192.168.0.186/categories/linux/"/>
    
    
      <category term="raspberry" scheme="http://192.168.0.186/tags/raspberry/"/>
    
      <category term="centos7" scheme="http://192.168.0.186/tags/centos7/"/>
    
      <category term="static ip" scheme="http://192.168.0.186/tags/static-ip/"/>
    
  </entry>
  
  <entry>
    <title>win10-ftp</title>
    <link href="http://192.168.0.186/2019/06/21/win10-ftp/"/>
    <id>http://192.168.0.186/2019/06/21/win10-ftp/</id>
    <published>2019-06-21T04:07:14.000Z</published>
    <updated>2019-07-10T12:10:08.283Z</updated>
    
    <content type="html"><![CDATA[<p>configure the ftp evrironment on the win10 cumpyter.<br><a id="more"></a></p><h1 id="add-ftp-service"><a href="#add-ftp-service" class="headerlink" title="add ftp service"></a>add ftp service</h1><p>control panel &gt; program &gt; start and close the windows project<br>Internet Information Services &gt; choose the following items  </p><ul><li>FTP services  </li><li>FTP extensibility  </li><li>IIS Management Console</li></ul><h1 id="create-ftp-server"><a href="#create-ftp-server" class="headerlink" title="create ftp server"></a>create ftp server</h1><p>start IIS Manager &gt; add ftp site</p><div class="table-container"><table><thead><tr><th>name</th><th>message</th></tr></thead><tbody><tr><td>ftp-site-name</td><td>name</td></tr><tr><td>physical-paht</td><td>file-paht</td></tr><tr><td>ip-address</td><td>ip</td></tr><tr><td>SSL</td><td>without-ssl</td></tr><tr><td>authentication</td><td>anonymity-or-basic</td></tr><tr><td>authorization</td><td>any-user</td></tr><tr><td>authorization</td><td>read-or-write</td></tr></tbody></table></div><h1 id="configure-firewall"><a href="#configure-firewall" class="headerlink" title="configure firewall"></a>configure firewall</h1><p>If you want to use the server on local area network, you should let the special server pass through the firewall.<br>Control panel &gt; systems and security &gt; windows defender &gt; allow apps or function to pass through windows defender<br>allow ftp server pass through private and public networks<br>allow another apps &gt; <code>C:\Windows\System32\svchost.exe</code><br>Now, you can transfer files over the network.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;configure the ftp evrironment on the win10 cumpyter.&lt;br&gt;
    
    </summary>
    
      <category term="win10" scheme="http://192.168.0.186/categories/win10/"/>
    
    
      <category term="install" scheme="http://192.168.0.186/tags/install/"/>
    
      <category term="win10" scheme="http://192.168.0.186/tags/win10/"/>
    
      <category term="ftp" scheme="http://192.168.0.186/tags/ftp/"/>
    
  </entry>
  
  <entry>
    <title>pycharm-remote</title>
    <link href="http://192.168.0.186/2019/06/19/pycharm-remote/"/>
    <id>http://192.168.0.186/2019/06/19/pycharm-remote/</id>
    <published>2019-06-19T03:40:33.000Z</published>
    <updated>2019-07-10T12:08:56.355Z</updated>
    
    <content type="html"><![CDATA[<p>build pycharm remote debugging function<br><a id="more"></a><br><!--finished--></p><h1 id="set-python-remote-interpreter"><a href="#set-python-remote-interpreter" class="headerlink" title="set python remote interpreter"></a>set python remote interpreter</h1><p>How to use remote interpreter.<br>File &gt; Settings &gt; Project: xxx &gt; Project Interpreter &gt; Add Remote &gt; SSH Credentials<br><strong>SSH Credentials</strong>  </p><div class="table-container"><table><thead><tr><th>options</th><th>content</th></tr></thead><tbody><tr><td>Host</td><td>ip</td></tr><tr><td>Port</td><td>port</td></tr><tr><td>User-name</td><td>user_name</td></tr><tr><td>Password</td><td>xxx</td></tr><tr><td>Python-interpreter-path</td><td>remote-python-interpreter-path</td></tr></tbody></table></div><p><strong>Path mappings</strong><br>Local Path &lt;—&gt; Remote Path</p><h1 id="set-deployment-for-the-synchronization-of-local-and-remote-files"><a href="#set-deployment-for-the-synchronization-of-local-and-remote-files" class="headerlink" title="set deployment for the synchronization of local and remote files"></a>set deployment for the synchronization of local and remote files</h1><p>Tools &gt; Deployment &gt; Configuration &gt; +<br><strong>Connection</strong>  </p><div class="table-container"><table><thead><tr><th>options</th><th>content</th></tr></thead><tbody><tr><td>name</td><td>deployment_name</td></tr><tr><td>Type</td><td>SFTP</td></tr><tr><td>SFTP-host</td><td>ip</td></tr><tr><td>Port</td><td>port</td></tr><tr><td>Root-Path</td><td>remote-root-path</td></tr><tr><td>User-name</td><td>user_name</td></tr><tr><td>Password</td><td>xxx</td></tr><tr><td>Advanced-options</td><td>UTF-8</td></tr></tbody></table></div><p><strong>Mappings</strong>  </p><div class="table-container"><table><thead><tr><th>options</th><th>content</th></tr></thead><tbody><tr><td>Local-path</td><td>local_path</td></tr><tr><td>Deployment-path-on-server</td><td>remote-deployment-paht</td></tr></tbody></table></div><p>enable the deployment path on server, you can upload and download files between local and remote files<br>Tools &gt; Deployment &gt; Browse Remote Host</p><h1 id="set-python-version-running-on-the-terminal"><a href="#set-python-version-running-on-the-terminal" class="headerlink" title="set python version running on the terminal"></a>set python version running on the terminal</h1><p>File &gt; Setting &gt; Tools SSH Terminal &gt; Deployment server<br>You can choose the python interpreter you need from the tips. And choose UTF-8 as the default encoding.<br>Now, you can find the interpreter ont Tools &gt; Start SSH session.</p><h1 id="set-configurations"><a href="#set-configurations" class="headerlink" title="set configurations"></a>set configurations</h1><p>configure python remote debug you need<br>Run &gt; Edit Configurations &gt; + &gt; Python Remote Debug</p><div class="table-container"><table><thead><tr><th>options</th><th>content</th></tr></thead><tbody><tr><td>Name</td><td>name</td></tr><tr><td>Local-host-name</td><td>ip</td></tr><tr><td>Port</td><td>port-greater-than-1003</td></tr><tr><td>Path-mappings</td><td>Local-path&lt;—&gt;Remote-path</td></tr></tbody></table></div><p>the <code>Path mappings</code> like the <code>set python remote interpreter</code><br>Now, add the environment variables CUDA need.<br>Run &gt; Edit Configurations &gt; Defaults &gt; python &gt; Environment variables</p><div class="table-container"><table><thead><tr><th>environment-variables</th><th>cotent</th></tr></thead><tbody><tr><td>CUDA_DEVICE_ORDER</td><td>PCI_BUS_ID</td></tr><tr><td>LD_LIBRARY_PATH</td><td>”$LD_LIBRARY_PATH:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64”</td></tr><tr><td>CUDA_HOME</td><td>/usr/local/cuda</td></tr><tr><td>CUDA_VISIBLE_DEVICES</td><td>0,1</td></tr><tr><td>TF_CPP_MIN_LOG_LEVEL</td><td>1</td></tr></tbody></table></div><p>Maybe, there are some error about cuda, you can use the following command to view the equipment remote python interpreter can use. If you don’t find the GPU on the printed message, you could adjust <code>CUDA_VISIBLE_DEVICES</code> content to find the right equitment.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorflow.python.client <span class="keyword">import</span> device_lib</span><br><span class="line">print(debice_lib.list_local_devices())</span><br></pre></td></tr></table></figure></p><p>Ok, enjoy your new toy!</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;build pycharm remote debugging function&lt;br&gt;
    
    </summary>
    
      <category term="IDE" scheme="http://192.168.0.186/categories/IDE/"/>
    
    
      <category term="python" scheme="http://192.168.0.186/tags/python/"/>
    
      <category term="pycharm" scheme="http://192.168.0.186/tags/pycharm/"/>
    
      <category term="remote" scheme="http://192.168.0.186/tags/remote/"/>
    
  </entry>
  
  <entry>
    <title>lua-cmd</title>
    <link href="http://192.168.0.186/2019/06/08/lua-cmd/"/>
    <id>http://192.168.0.186/2019/06/08/lua-cmd/</id>
    <published>2019-06-08T12:29:10.000Z</published>
    <updated>2019-07-10T12:08:52.405Z</updated>
    
    <content type="html"><![CDATA[<p>install Lua<br><a id="more"></a><br><!--finished--></p><h1 id="installation"><a href="#installation" class="headerlink" title="installation"></a>installation</h1><ul><li>Download the binary file <code>lua-5.3.5_Win64_bin.zip</code> form the <a href="http://luabinaries.sourceforge.net/download.html" target="_blank" rel="noopener">offical website</a></li><li><p>Upzip <code>*.zip</code> to get the following file and adjust the file name to the right one</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lua53.exe   --&gt; lua.exe</span><br><span class="line">luac53.exe  --&gt; luac.exe</span><br><span class="line">wlua53.exe  --&gt; wlua.exe</span><br><span class="line">lua53.dll</span><br></pre></td></tr></table></figure></li><li><p>Add the file path to the environment path.</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;install Lua&lt;br&gt;
    
    </summary>
    
      <category term="linux" scheme="http://192.168.0.186/categories/linux/"/>
    
    
      <category term="install" scheme="http://192.168.0.186/tags/install/"/>
    
      <category term="Lua" scheme="http://192.168.0.186/tags/Lua/"/>
    
  </entry>
  
  <entry>
    <title>VSCode-Plugin</title>
    <link href="http://192.168.0.186/2019/06/05/VSCode-Plugin/"/>
    <id>http://192.168.0.186/2019/06/05/VSCode-Plugin/</id>
    <published>2019-06-05T14:18:44.000Z</published>
    <updated>2019-07-10T12:09:50.120Z</updated>
    
    <content type="html"><![CDATA[<p>describe the VSCode Plugin, install, setting<br><strong>note:</strong> It’s working.<br><a id="more"></a></p><h1 id="fundamental-concept"><a href="#fundamental-concept" class="headerlink" title="fundamental concept"></a>fundamental concept</h1><p><code>task</code>: running a script once.<br><code>task.json</code>: setting file about <code>task</code>.<br><code>working space</code>: the working folder.<br><code>setting.json</code>: setting file of the working space. you can find a button on the bottom right corner, and click it you will find the setting button.<br><code>launch.json</code>: setting file of debug environment.  </p><h1 id="Markdown-plugin"><a href="#Markdown-plugin" class="headerlink" title="Markdown plugin"></a>Markdown plugin</h1><h2 id="Markdown-All-in-One"><a href="#Markdown-All-in-One" class="headerlink" title="Markdown All in One"></a>Markdown All in One</h2><p>Some shrotcuts for markdown editing</p><h2 id="Markdown-Preview-Github-Styling"><a href="#Markdown-Preview-Github-Styling" class="headerlink" title="Markdown Preview Github Styling"></a>Markdown Preview Github Styling</h2><p>Change VSCode’s built-in markdown preview to match Github’s style</p><h2 id="Markdown-Shrotcuts"><a href="#Markdown-Shrotcuts" class="headerlink" title="Markdown Shrotcuts"></a>Markdown Shrotcuts</h2><p>Some shortcuts for markdown editing</p><h1 id="python-plugin"><a href="#python-plugin" class="headerlink" title="python plugin"></a>python plugin</h1><h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><p>python official plugin<br><strong>setting.json</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">"python.pythonPath": "E:/Anaconda3/envs/tf-gpu/python",</span><br><span class="line">"python.linting.pylintPath": "E:/Anaconda3/envs/tf-gpu/Scripts",</span><br></pre></td></tr></table></figure></p><p>the first one is the<code>python.exe</code>‘s path.<br>the second one is the<code>pylint.exe</code>‘s path. It’s a code analysis tool, and you can install it by the following command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pylint</span><br></pre></td></tr></table></figure></p><p><strong>tasks.json</strong><br>run python file shortcut:<code>Ctrl+Shift+B</code><br>set the default template to create <code>tasks.json</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> <span class="comment"># the script to run</span></span><br><span class="line">args    <span class="comment"># the paraments set for running. using this "$&#123;file&#125;"</span></span><br></pre></td></tr></table></figure></p><p><strong>lunch.json</strong><br>click the debug icon on the left bar, and find the setting button on the top bar.<br>now, it’s time for you to debug you code.</p><h2 id="Visual-Studio-IntelliCode"><a href="#Visual-Studio-IntelliCode" class="headerlink" title="Visual Studio IntelliCode"></a>Visual Studio IntelliCode</h2><p>Code completion automatically<br><strong>setting.json</strong><br>add the following command to the setting file.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"python.autoComplete.extraPaths"</span>: [</span><br><span class="line">    <span class="string">"E:/Anaconda3/envs/tf-gpu"</span>,</span><br><span class="line">    <span class="string">"E:/Anaconda3/envs/tf-gpu/Lib"</span>,</span><br><span class="line">    <span class="string">"E:/Anaconda3/envs/tf-gpu/Lib/site-packages"</span>,</span><br><span class="line">    <span class="string">"E:/Anaconda3/envs/tf-gpu/DLLs"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;describe the VSCode Plugin, install, setting&lt;br&gt;&lt;strong&gt;note:&lt;/strong&gt; It’s working.&lt;br&gt;
    
    </summary>
    
      <category term="VSCode" scheme="http://192.168.0.186/categories/VSCode/"/>
    
    
      <category term="VSCode" scheme="http://192.168.0.186/tags/VSCode/"/>
    
  </entry>
  
  <entry>
    <title>anaconda-cmd</title>
    <link href="http://192.168.0.186/2019/06/05/anaconda-cmd/"/>
    <id>http://192.168.0.186/2019/06/05/anaconda-cmd/</id>
    <published>2019-06-05T03:46:47.000Z</published>
    <updated>2019-07-10T12:08:34.944Z</updated>
    
    <content type="html"><![CDATA[<p>inistall anaconda on the win10, set environment variables, and some operation command.<br><a id="more"></a></p><h1 id="inistall"><a href="#inistall" class="headerlink" title="inistall"></a>inistall</h1><ol><li>download the latest installation file from <a href="https://www.anaconda.com/distribution/" target="_blank" rel="noopener">anaconda official website</a>  </li><li>select the default installing option</li></ol><h1 id="set-the-environment-variables"><a href="#set-the-environment-variables" class="headerlink" title="set the environment variables"></a>set the environment variables</h1><p>add the system environment path <code>$PATH</code>with the following anaconda installing path:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Anaconda3</span><br><span class="line">Anaconda3/Scripts</span><br><span class="line">Anasonda3/Library/bin</span><br></pre></td></tr></table></figure></p><h1 id="operation-command"><a href="#operation-command" class="headerlink" title="operation command"></a>operation command</h1><h2 id="creat-new-working-environment"><a href="#creat-new-working-environment" class="headerlink" title="creat new working environment"></a>creat new working environment</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n environment_name [python=x.x]</span><br></pre></td></tr></table></figure><p>you can select the python version, and the default version is the one in conda</p><h2 id="activate-the-working-environment"><a href="#activate-the-working-environment" class="headerlink" title="activate the working environment"></a>activate the working environment</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">activate environment_name</span><br></pre></td></tr></table></figure><h2 id="deactivate-the-wroking-environment"><a href="#deactivate-the-wroking-environment" class="headerlink" title="deactivate the wroking environment"></a>deactivate the wroking environment</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate environment_name</span><br></pre></td></tr></table></figure><h2 id="remove-the-wroking-environment"><a href="#remove-the-wroking-environment" class="headerlink" title="remove the wroking environment"></a>remove the wroking environment</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda remove -n environmtne_name --all</span><br></pre></td></tr></table></figure><h2 id="view-currently-available-working-environment"><a href="#view-currently-available-working-environment" class="headerlink" title="view currently available working environment"></a>view currently available working environment</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda info --env</span><br><span class="line">conda info -e</span><br></pre></td></tr></table></figure><h2 id="change-the-pip-source-to-speed-up-download"><a href="#change-the-pip-source-to-speed-up-download" class="headerlink" title="change the pip source to speed up download"></a>change the pip source to speed up download</h2><ol><li>make flolder named <code>pip</code> on the <code>C:\Users\xx\</code></li><li>add the setting file <code>pip.ini</code> to this flolder <code>C:\Users\xx\pip\pip.ini</code></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><h2 id="uninstall-Anaconda"><a href="#uninstall-Anaconda" class="headerlink" title="uninstall Anaconda"></a>uninstall Anaconda</h2><p>find the <code>Uninstall-Anaconda.exe</code> on the installing path, and running it.</p><h2 id="clone-the-existing-environment"><a href="#clone-the-existing-environment" class="headerlink" title="clone the existing environment"></a>clone the existing environment</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n new_e --<span class="built_in">clone</span> old_e</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;inistall anaconda on the win10, set environment variables, and some operation command.&lt;br&gt;
    
    </summary>
    
      <category term="python" scheme="http://192.168.0.186/categories/python/"/>
    
    
      <category term="anaconda" scheme="http://192.168.0.186/tags/anaconda/"/>
    
      <category term="inistall" scheme="http://192.168.0.186/tags/inistall/"/>
    
  </entry>
  
  <entry>
    <title>win10-cuda-cudnn-tensorflow</title>
    <link href="http://192.168.0.186/2019/06/04/win10-cuda-cudnn-tensorflow/"/>
    <id>http://192.168.0.186/2019/06/04/win10-cuda-cudnn-tensorflow/</id>
    <published>2019-06-04T10:01:19.000Z</published>
    <updated>2019-07-10T12:09:57.161Z</updated>
    
    <content type="html"><![CDATA[<p>install <code>cuda10.1</code>,<code>cudnn7.6</code>,<code>tensorflow1.13.1</code><br><a id="more"></a></p><h1 id="install-CUDA"><a href="#install-CUDA" class="headerlink" title="install CUDA"></a>install CUDA</h1><ol><li>download the cuda file<code>cuda_10.1.168_425.25_win10.exe</code> from the <a href="https://developer.nvidia.com/cuda-downloads" target="_blank" rel="noopener">CUDA official website</a></li><li>select the default installing option</li><li>set the environment variables as following</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># new system environment variables</span></span><br><span class="line">CUDA_SDK_PATH = C:\ProgramData\NVIDIA Corporation\CUDA Samples\v8.0</span><br><span class="line">CUDA_LIB_PATH = %CUDA_PATH%\lib\x64</span><br><span class="line">CUDA_BIN_PATH = %CUDA_PATH%\bin</span><br><span class="line">CUDA_SDK_BIN_PATH = %CUDA_SDK_PATH%\bin\win64</span><br><span class="line">CUDA_SDK_LIB_PATH = %CUDA_SDK_PATH%\common\lib\x64</span><br><span class="line"><span class="comment"># add to system variable PATH</span></span><br><span class="line">%CUDA_LIB_PATH%;%CUDA_BIN_PATH%;%CUDA_SDK_LIB_PATH%;%CUDA_SDK_BIN_PATH%;</span><br><span class="line">C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v8.0\lib\x64；</span><br><span class="line">C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v8.0\bin；</span><br><span class="line">C:\ProgramData\NVIDIA Corporation\CUDA Samples\v8.0\common\lib\x64；</span><br><span class="line">C:\ProgramData\NVIDIA Corporation\CUDA Samples\v8.0\bin\win64；</span><br></pre></td></tr></table></figure><ol><li>check whether the CUDA works properly by the following command</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nvcc -V</span><br><span class="line"><span class="built_in">cd</span> NVIDIA GPU Computing Toolkit\CUDA\v10.1\extras\demo_suite</span><br><span class="line">deviceQuery.exe</span><br><span class="line">bandwidthTest.exe</span><br></pre></td></tr></table></figure><h1 id="install-cudnn"><a href="#install-cudnn" class="headerlink" title="install cudnn"></a>install cudnn</h1><ol><li>downloading the cudnn file<code>cudnn-10.1-windows10-x64-v7.6.0.64.zip</code>from the <a href="https://developer.nvidia.com/rdp/cudnn-download" target="_blank" rel="noopener">CUDA official website</a></li><li>copy the cudnn files to the corresponding CUDA folder.</li></ol><h1 id="install-Anaconda"><a href="#install-Anaconda" class="headerlink" title="install Anaconda"></a>install Anaconda</h1><ul><li>downloading the Anaconda installation file for the <a href="https://www.anaconda.com/distribution/" target="_blank" rel="noopener">Anacoada official website</a></li><li>set the environment variables</li><li>create python3.7 working environment</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n environment_name python=3.7</span><br></pre></td></tr></table></figure><ul><li>download the tensorflow-gpu installing file <a href="https://github.com/fo40225/tensorflow-windows-wheel" target="_blank" rel="noopener">tensorflow_gpu-1.13.1-cp37-cp37m-win_amd64.whl</a></li><li>install this file under the working environment</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install xxx.whl</span><br></pre></td></tr></table></figure><ul><li>check whether it works properly</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line">sess = tf.Session()</span><br><span class="line">a = tf.constant([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">print(sess.run(a))</span><br></pre></td></tr></table></figure><ul><li>ok, enjoy it.</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;install &lt;code&gt;cuda10.1&lt;/code&gt;,&lt;code&gt;cudnn7.6&lt;/code&gt;,&lt;code&gt;tensorflow1.13.1&lt;/code&gt;&lt;br&gt;
    
    </summary>
    
      <category term="win10" scheme="http://192.168.0.186/categories/win10/"/>
    
    
      <category term="tensorflow" scheme="http://192.168.0.186/tags/tensorflow/"/>
    
      <category term="win10" scheme="http://192.168.0.186/tags/win10/"/>
    
      <category term="cuda" scheme="http://192.168.0.186/tags/cuda/"/>
    
      <category term="cudnn" scheme="http://192.168.0.186/tags/cudnn/"/>
    
  </entry>
  
</feed>
